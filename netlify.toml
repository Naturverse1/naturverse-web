
[build]
  base = "web"
  command = "npm ci && npm run build"
  publish = "dist"

[functions]
directory = "functions"
node_bundler = "esbuild"

[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--legacy-peer-deps"
  # Make installs less fragile on CI
  NPM_CONFIG_AUDIT = "false"
  NPM_CONFIG_FUND = "false"

[[redirects]]
from = "/api/*"
to = "/.netlify/functions/:splat"
status = 200

[[redirects]]
from = "/*"
to = "/index.html"
status = 200
